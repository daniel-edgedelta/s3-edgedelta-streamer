events {
    worker_connections 1024;
}

http {
    server {
        listen 80;
        server_name localhost;

        location / {
            # Log all incoming requests
            access_log /var/log/nginx/access.log;

            # Return success for any POST request
            if ($request_method = POST) {
                return 200 '{"status": "ok", "received": true}\n';
                add_header Content-Type application/json;
            }

            # Return 405 for other methods
            return 405 '{"error": "method not allowed"}\n';
            add_header Content-Type application/json;
        }

        location /health {
            return 200 '{"status": "healthy"}\n';
            add_header Content-Type application/json;
        }
    }
}